# 一、部署方法

## 1、集群模式

- ### etc/etc.yaml

  ~~~yaml
  # 单节点还是集群 node/cluster
  configType: cluster
  ~~~

- ### 集群模式下需要使用etcd作为服务发现，master结点负责调用服务，node节点提供服务

  ![](./img/RS集群v1.png)

- ### node结点上需要填写etcd、索引、注册中心和server配置

  ~~~yaml
  # etcd配置
  etcd:
    endpoints:
    - 192.168.92.201:2379
    - 192.168.92.201:2372
    dialTimeout: 300
  # 正排索引配置
  forwardindex:
    dbType: 1  #使用数据库类型
    dateDir: 192.168.92.201:6379 #数据库地址
  # 倒排索引配置
  reverseindex:
    indexType: 1 #使用索引结构类型，默认是跳表
    docNumEstimate: 1000 #文档数目预估
  # 服务注册中心配置
  servicehub:
    serviceHubType: proxy
    qps: 10
    heartbeatFrequency: 3
  #集群模式下node节点配置
  server :
    nodeIp : 192.168.92.201
    port : 5455
  ~~~
  ##### 启动main.go程序 读取配置文件信息，向etcd注册服务，监听指定端口暴露服务
  
- ### master节点上需要填写etcd和服务注册中心配置
  
  - ~~~yaml
    # etcd配置
    etcd:
      endpoints:
      - 192.168.92.201:2379
      - 192.168.92.201:2372
      dialTimeout: 300
    # 服务注册中心配置
    servicehub:
      serviceHubType: proxy
      qps: 10
      heartbeatFrequency: 3
    ~~~
  
  - #### 调用Research.go中的方法进行使用
  
    ~~~go
    c := etc.GetConfig("etc/etc.yaml")
    rs,_ := NewResearch(c)
    ~~~
  
    

## 2、单节点模式

- ### etc/etc.yaml

  ~~~yaml
  # 单节点还是集群 node/cluster
  configType: node
  ~~~

- ### 填写除server外的配置信息，使用Research进行操作

  ~~~yaml
  c := etc.GetConfig("etc/etc.yaml")
  rs,_ := NewResearch(c)
  ~~~
  
# 二、组件扩展
## 1、负载均衡
## 2、限流策略
## 3、倒排索引结构
## 4、正排索引数据库

  

